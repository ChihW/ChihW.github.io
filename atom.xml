<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ChihW&#39;s Blog</title>
  
  <subtitle>专注前端30年</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-03-07T09:49:12.526Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>ChihW</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>如何使用el-table进行动态渲染</title>
    <link href="http://yoursite.com/2020/03/07/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8el-table%E8%BF%9B%E8%A1%8C%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93/"/>
    <id>http://yoursite.com/2020/03/07/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8el-table%E8%BF%9B%E8%A1%8C%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93/</id>
    <published>2020-03-07T06:37:48.153Z</published>
    <updated>2020-03-07T09:49:12.526Z</updated>
    
    <content type="html"><![CDATA[<p>​    在日常工作中， 经常会碰到表头字段不确定的情况，表头显示的字段名称需要根据后端接口的返回来动态渲染，这时候我们应该怎么处理了，本文将跟大家分享一下，如何使用el-table如何来进行动态渲染！</p><a id="more"></a><p>​    首先，我们来看一下想要实现的效果，如下图所示</p><p><img src="https://i.loli.net/2020/03/07/pw4glkN8CWQydr5.png" alt="微信截图_20200307170707.png"></p><div align="center"> 效果一 </div><p><img src="https://i.loli.net/2020/03/07/mEQJr3FBwGLUcb2.png" alt="微信截图_20200307170840.png"></p><div align="center"> 效果二 </div><p>​    如上两张图可以发现， 表头部分是不确定的， 表头字段是根据接口的返回值来显示，而且表头的上半部分是不确定的如需要统计的日期， 但是下半部分又是确定如（本期，同期，同比）。</p><p>​    首先需要实现这种效果我们先是要用到<strong>el-table-column</strong>的嵌套使用，代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-table-column v-for&#x3D;&quot;(item,key1) in tablehead.labels&quot; align&#x3D;&quot;center&quot; :key&#x3D;&quot;key1&quot; :label&#x3D;&quot;item.name&quot;&gt;</span><br><span class="line">        &lt;el-table-column v-for&#x3D;&quot;(value,key) in item.children&quot; align&#x3D;&quot;center&quot; :prop&#x3D;&quot;value.prop&quot; :key&#x3D;&quot;key&quot; :formatter&#x3D;&quot;nullFormatter&quot;</span><br><span class="line">          :label-class-name&#x3D;&quot;value.prop&quot; :label&#x3D;&quot;value.name&quot; :id&#x3D;&quot;key&quot;&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br><span class="line">&lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure><p>​    对应的数据结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"labels"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"2020-03-09"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"本期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KCurrPeriod2"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KLastPeriod2"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同比"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KYoy2"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"2020-03-10"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"本期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KCurrPeriod3"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KLastPeriod3"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同比"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KYoy3"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"2020-03-11"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"本期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KCurrPeriod4"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KLastPeriod4"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同比"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KYoy4"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"2020-03-12"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"本期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KCurrPeriod5"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KLastPeriod5"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同比"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KYoy5"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"datas"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">             </span><br><span class="line">                <span class="attr">"KCurrPeriod4"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KCurrPeriod5"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KCurrPeriod2"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KCurrPeriod3"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KYoy3"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KYoy2"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KYoy5"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KYoy4"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KLastPeriod4"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KLastPeriod5"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KLastPeriod2"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KLastPeriod3"</span>: <span class="string">"-"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>​    对比数据结构可以发现， 后端接口返回的格式也必须要以特定的格式，<strong>labels</strong>部分用来生成对应的表头字段，<strong>datas</strong>部分对应的就是数据。</p><p><img src="https://i.loli.net/2020/03/07/UOm8ZGnrvhcAXk3.png" alt="微信截图_20200307173659.png"><br>    如上所标识的，<strong>labels</strong>中的<strong>prop</strong>值需要跟<strong>datas</strong>中的<strong>key</strong>保持一致， 这样就可以进行动态渲染了。对于前端来说实现起来还是比较简单的， 然后这个艰巨的任务要交给后端的接口部分（嘻嘻，后端的小伙伴不要打哦！）。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;​    在日常工作中， 经常会碰到表头字段不确定的情况，表头显示的字段名称需要根据后端接口的返回来动态渲染，这时候我们应该怎么处理了，本文将跟大家分享一下，如何使用el-table如何来进行动态渲染！&lt;/p&gt;
    
    </summary>
    
    
      <category term="前端那些事" scheme="http://yoursite.com/categories/%E5%89%8D%E7%AB%AF%E9%82%A3%E4%BA%9B%E4%BA%8B/"/>
    
    
      <category term="element-ui" scheme="http://yoursite.com/tags/element-ui/"/>
    
      <category term="vue" scheme="http://yoursite.com/tags/vue/"/>
    
  </entry>
  
</feed>
