<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>如何使用el-table进行动态渲染</title>
    <url>/2020/03/07/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8el-table%E8%BF%9B%E8%A1%8C%E5%8A%A8%E6%80%81%E6%B8%B2%E6%9F%93/</url>
    <content><![CDATA[<p>​    在日常工作中， 经常会碰到表头字段不确定的情况，表头显示的字段名称需要根据后端接口的返回来动态渲染，这时候我们应该怎么处理了，本文将跟大家分享一下，如何使用el-table如何来进行动态渲染！</p>
<a id="more"></a>

<p>​    首先，我们来看一下想要实现的效果，如下图所示</p>
<p><img src="https://i.loli.net/2020/03/07/pw4glkN8CWQydr5.png" alt="微信截图_20200307170707.png"></p>
<div align="center"> 效果一 </div>

<p><img src="https://i.loli.net/2020/03/07/mEQJr3FBwGLUcb2.png" alt="微信截图_20200307170840.png"></p>
<div align="center"> 效果二 </div>

<p>​    如上两张图可以发现， 表头部分是不确定的， 表头字段是根据接口的返回值来显示，而且表头的上半部分是不确定的如需要统计的日期， 但是下半部分又是确定如（本期，同期，同比）。</p>
<p>​    首先需要实现这种效果我们先是要用到<strong>el-table-column</strong>的嵌套使用，代码如下：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-table-column v-for&#x3D;&quot;(item,key1) in tablehead.labels&quot; align&#x3D;&quot;center&quot; :key&#x3D;&quot;key1&quot; :label&#x3D;&quot;item.name&quot;&gt;</span><br><span class="line">        &lt;el-table-column v-for&#x3D;&quot;(value,key) in item.children&quot; align&#x3D;&quot;center&quot; :prop&#x3D;&quot;value.prop&quot; :key&#x3D;&quot;key&quot; :formatter&#x3D;&quot;nullFormatter&quot;</span><br><span class="line">          :label-class-name&#x3D;&quot;value.prop&quot; :label&#x3D;&quot;value.name&quot; :id&#x3D;&quot;key&quot;&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br><span class="line">&lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>

<p>​    对应的数据结构如下：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"data"</span>: &#123;</span><br><span class="line">        <span class="attr">"labels"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"2020-03-09"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"本期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KCurrPeriod2"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KLastPeriod2"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同比"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KYoy2"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"2020-03-10"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"本期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KCurrPeriod3"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KLastPeriod3"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同比"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KYoy3"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"2020-03-11"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"本期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KCurrPeriod4"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KLastPeriod4"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同比"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KYoy4"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"name"</span>: <span class="string">"2020-03-12"</span>,</span><br><span class="line">                <span class="attr">"children"</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"本期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KCurrPeriod5"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同期"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KLastPeriod5"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"name"</span>: <span class="string">"同比"</span>,</span><br><span class="line">                        <span class="attr">"prop"</span>: <span class="string">"KYoy5"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"datas"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">             </span><br><span class="line">                <span class="attr">"KCurrPeriod4"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KCurrPeriod5"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KCurrPeriod2"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KCurrPeriod3"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KYoy3"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KYoy2"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KYoy5"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KYoy4"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KLastPeriod4"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KLastPeriod5"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KLastPeriod2"</span>: <span class="string">"-"</span>,</span><br><span class="line">                <span class="attr">"KLastPeriod3"</span>: <span class="string">"-"</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    对比数据结构可以发现， 后端接口返回的格式也必须要以特定的格式，<strong>labels</strong>部分用来生成对应的表头字段，<strong>datas</strong>部分对应的就是数据。</p>
<p><img src="https://i.loli.net/2020/03/07/UOm8ZGnrvhcAXk3.png" alt="微信截图_20200307173659.png"><br>    如上所标识的，<strong>labels</strong>中的<strong>prop</strong>值需要跟<strong>datas</strong>中的<strong>key</strong>保持一致， 这样就可以进行动态渲染了。对于前端来说实现起来还是比较简单的， 然后这个艰巨的任务要交给后端的接口部分（嘻嘻，后端的小伙伴不要打哦！）。</p>
]]></content>
      <categories>
        <category>前端那些事</category>
      </categories>
      <tags>
        <tag>element-ui</tag>
        <tag>vue</tag>
      </tags>
  </entry>
</search>
